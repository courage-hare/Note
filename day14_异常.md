# 异常

* 什么是异常

* 如何处理异常

* ```java
  try-catch-finally
  throw
  throws
  自定义异常
  异常链
  ```



### 什么是异常

异常:异常本质上说就是程序上运行的错误

* 错误在我们编写程序的过程中会经常发生,包括编译期间和运行期间的错误
  * 括号没有正常配对
  * 语句结束少些了分号
  * 关键字编写错误
* 在程序运行过程中,意外发生的情况,背离我们程序本身的意图的表现,都可以理解为异常

如何针对程序运行期间产生的异常进行合理的处理?



### throwable

Error:是程序无法处理的错误,表示运行应用程序中较严重的问题

​	虚拟机错误:VirtualMachineError

​	内层溢出:OutOfMemoryError

​	线程死锁:ThreadDeath

​		他们在应用程序的控制和处理能力之外,而绝大多数是程序运行时不允许出现的状况,对于设计合理的应用程序来说,即使确实发生了错误,本质上也不应该试图去处理它所引起的异常状况.

Exception:程序本身可以处理的异常,异常处理通常指针对这种类型异常的处理

​	检测异常:Checked Exception

​		编译器要求必须处置的异常

​	非检测异常:Unchecked Exception

​		RuntimeException:空指针异常NullPointerException等.



### 异常处理

* 在java应用程序中,异常处理机制为:抛出异常,捕捉异常
* 异常对象:异常类型;异常时出现的程序状态
* 对于运行时异常,错误或可查异常,java技术所要求的异常处理方式有所不同
  * java规定
    * 对于可查异常必须捕捉,或者声明抛出
    * 运行忽略不可查的RuntimeException(含子类)和Error(含子类)
* 通过5个关键字实现:try;catch;finally;throw;throws;
  * (捕获异常)
    * try:执行可能产生异常代码
    * catch:捕获异常
    * finally:无论是否发生异常代码总能执行
  * (声明异常)
    * throws:声明可能要抛出的异常
  * (抛出异常)
    * throw:手动抛出异常



### try-catch-finally

try块后可以接零个或多个catch块,如果没有catch块,则必须跟一个finally块,组合使用



### throw & throws

* 可以通过throws声明将要抛出何种类型的异常,通过throw将产生的异常抛出
* 如果一个方法可能会出现异常,但没有能力处理这个异常,可以在方法声明处用throws字句来声明抛出异常
* throws语句用在方法定义时声明该方法要抛出的异常类型

```java
public void method() throws Exception1,Exception2...{
//可能产生异常的代码
}
```

* 当方法抛出异常列表的异常时,方法将不对这些类型及其子类类型的异常作处理,而抛向调用该方法的方法,由他去处理.



* throw用来抛出一个异常
* 例如:throw new IOException();
* throw抛出的是能够是可抛出类Throwable 或者 其子类的实例对象.
* 例如: throw new String("出错啦");错误的
* 方案一

```java
public void method(){
	try{
		//code
		throw new 异常类型();
	}catch(异常类型 ex){
		//code 2
	}
}
```

* 方案二

```java
public void method() throws 异常类型{
	//code
	throw new 异常类型();
}
```

* 1. 规避可能出现的风险
  2. 完成一些程序的逻辑



### 自定义异常

* 使用java内置的异常类可以描述在编程时出现的大部分异常情况.
* 也可以通过自定义异常描述特定业务产生的异常类型
* 所谓自定义类,就是定义一个类,去继承Throwable类或者它的子类



### 异常链

* 有时候我们会铺货一个异常后在抛出另一个异常
* 顾明思义就是:将异常发生的原因一个传一个串起来,即把底层的异常信息传给上层,这样逐层抛出

# 总结

* 程序中的异常
  * 在程序运行过程中,意外发生的情况,背离我们程序本事的意图的表现,都可以理解为异常
  * 利用java中的异常机制,我们可以更好的提升程序的健壮性
  * 在java 中,通过Throwable及其子类描述各种不同的异常类型
* 异常处理
  * 在java应用程序中,异常处理机制为:抛出异常,捕捉异常
  * 通过5个关键字实现:try,catch,finally,throw,throws
  * 实际应用中的经验与总结
    * 处理运行异常时,采用逻辑去合理规避同时辅助try-catch处理
    * 在多重catch块后面,可以加一个catch(Exception) 来处理可能会被遗漏的异常
    * 对于不确定的代码,也可以加上try-catch,处理潜在的异常
    * 尽量去处理异常,切记只是简单的调出printStackTrace()去打印输出
    * 具体如何处理异常,要根据不同的业务需求和异常类型去决定
    * 进了添加finally语句块去释放占用的内存
* throw&throws
  * 可以通过throws声明将要抛出何种类型的异常,通过throw将产生的异常抛出
  * 如果一个方法可能会出现异常,但没有能力处理这种异常,可以在方法声明处用throws字句来声明抛出异常
  * throw
    * 当子类重写父类抛出异常的方法时,声明的异常必须是父类方法所声明异常的同类或子类
* 自定义异常
  * 可以通过自定义异常类描述特定业务产生的异常类型
  * 所谓自定义异常,就是定义一个类,去继承Throwable类或者他的子类
* 异常链
  * 当捕获一个异常后再抛出另一个异常时,如果希望将异常发生的原因一个个传起来,即把底层的异常信息传给上层,就形成了异常链

